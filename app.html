<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Telegram Notification UI - Fixed</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    [contenteditable][data-empty="true"]:before {
      content: attr(data-placeholder);
      color: #9ca3af;
      pointer-events: none;
    }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Critical fix: Full height respecting mobile browser UI */
    html, body, #root { 
      height: 100%; 
      height: 100dvh; /* Dynamic viewport height - this is the key! */
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>
</head>
<body class="bg-gray-200">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;

    // ... (your SVG components remain the same)

    function TelegramNotification() {
      const [showChat, setShowChat] = useState(false);
      const [showEmojiPicker, setShowEmojiPicker] = useState(false);
      const [hasText, setHasText] = useState(false);
      const inputRef = useRef(null);

      // ... (all your handlers stay exactly the same)

      return (
        <div className="relative w-full h-screen bg-white max-w-md mx-auto flex flex-col">
          
          {/* Notification View */}
          {!showChat && (
            <div className="flex-1 flex flex-col justify-start p-4 animate-in slide-in-from-left">
              <div className="flex items-center justify-between p-4 bg-white rounded-2xl shadow-md">
                <div className="flex items-center gap-4 cursor-pointer" onClick={() => setShowChat(true)}>
                  <div className="w-14 h-14 rounded-full bg-orange-400 flex items-center justify-center">
                    <span className="text-white text-xl font-semibold">DS</span>
                  </div>
                  <div>
                    <h3 className="text-lg font-semibold text-gray-900">Daddy Steve</h3>
                    <p className="text-base text-gray-500">Daddy Steve joined Telegram</p>
                  </div>
                </div>
                <div className="text-gray-400 text-sm">Oct 27</div>
              </div>
            </div>
          )}

          {/* Chat View - Full height, safe from browser bars */}
          <div className={`absolute inset-0 bg-gray-100 flex flex-col transition-transform duration-300 ${showChat ? 'translate-x-0' : 'translate-x-full'}`}>
            
            {/* Chat Header - safe area top */}
            <div className="bg-white shadow-sm pt-safe-top pb-3 px-3 flex items-center justify-between">
              <div className="flex items-center gap-2">
                <button onClick={() => setShowChat(false)} className="text-gray-600 hover:text-gray-900">
                  <ArrowLeft />
                </button>
                <div className="flex items-center gap-2 ml-2">
                  <div className="w-9 h-9 rounded-full bg-orange-400 flex items-center justify-center">
                    <span className="text-white text-base font-semibold">DS</span>
                  </div>
                  <div>
                    <h3 className="text-base font-semibold text-gray-900">Daddy Steve</h3>
                    <p className="text-xs text-gray-500">last seen 11/4/2025</p>
                  </div>
                </div>
              </div>
              <button className="text-gray-600 hover:text-gray-900">
                <MoreVertical />
              </button>
            </div>

            {/* Messages Area */}
            <div 
              className="flex-1 overflow-y-auto hide-scrollbar p-4"
              style={{
                backgroundImage: 'url(https://i.ibb.co/fzG6R49y/Screenshot-20251125-105049.jpg)',
                backgroundSize: 'cover',
                backgroundPosition: 'center',
              }}
            >
              {/* Your messages here - unchanged */}
              <div className="flex flex-col gap-1 items-end max-w-full">
                {/* ... your message bubbles ... */}
              </div>
            </div>

            {/* Input Bar + Emoji Picker Container */}
            <div className="bg-white border-t border-gray-200">
              {/* Input Bar */}
              <div className="w-full flex items-center p-2 gap-1 pb-safe-bottom">
                {/* Your input code - unchanged except wrapper padding */}
                <button onClick={() => setShowEmojiPicker(!showEmojiPicker)} className="p-2">
                  {/* emoji icon */}
                </button>

                <div
                  ref={inputRef}
                  contentEditable
                  className="flex-1 bg-transparent text-gray-900 outline-none px-3 py-2 min-h-[40px] max-h-[120px] overflow-y-auto"
                  data-placeholder="Message..."
                  data-empty="true"
                  onInput={handleInput}
                  onKeyDown={handleKeyDown}
                  // ... other handlers
                />

                {/* Your buttons and send icon */}
              </div>

              {/* Emoji Picker */}
              <div 
                className="overflow-hidden transition-all duration-300"
                style={{ height: showEmojiPicker ? '300px' : '0px' }}
              >
                <div className="p-4 bg-gray-50">
                  <div className="grid grid-cols-8 gap-3 text-2xl">
                    {/* Add some emojis for demo */}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<TelegramNotification />, document.getElementById('root'));
  </script>
</body>
</html>
